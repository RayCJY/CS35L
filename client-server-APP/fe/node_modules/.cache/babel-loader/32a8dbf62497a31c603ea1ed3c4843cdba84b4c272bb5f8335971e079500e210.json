{"ast":null,"code":"import _slicedToArray from \"/Users/Ray/Desktop/Client-Server-Proj/CS35L/client-server-APP/fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/Ray/Desktop/Client-Server-Proj/CS35L/client-server-APP/fe/src/signin.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\n// signin.jsx\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport IdHandlerComponent from \"./idHandler\"; // Update the import path accordingly\nimport \"./signup.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar SigninComponent = function SigninComponent(_ref) {\n  _s();\n  var onSignUpSuccess = _ref.onSignUpSuccess;\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    input1 = _useState2[0],\n    setInput1 = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    input2 = _useState4[0],\n    setInput2 = _useState4[1];\n  var _IdHandlerComponent = IdHandlerComponent(),\n    setClientID = _IdHandlerComponent.setClientID,\n    getClientID = _IdHandlerComponent.getClientID;\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    retrieved_ID = _useState6[0],\n    setRetrievedID = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    loginStatus = _useState8[0],\n    setLoginStatus = _useState8[1];\n  var history = useHistory();\n  var nameToID = function nameToID() {\n    axios.get(\"http://localhost:8081/user/nameToID/\".concat(input1)).then(function (response) {\n      var _response$data = _slicedToArray(response.data, 1),\n        retrievedID = _response$data[0];\n      setRetrievedID(retrievedID);\n    }).catch(function (error) {\n      console.error(error.response ? error.response.data : error.message);\n    });\n  };\n  var handleSignin = function handleSignin() {\n    axios.post('http://localhost:8081/user/signin', {\n      username: input1,\n      password: input2\n    }).then(function (response) {\n      if (!(response && response.data && response.data.status === \"success\")) {\n        setLoginStatus(\"Login failed\");\n        return;\n      }\n      var userData = response.data.user;\n      setClientID(userData.id);\n      // store user info in sessionStorage\n      sessionStorage.setItem(\"userInfo\", JSON.stringify(userData));\n      onSignUpSuccess();\n      history.push(\"/\");\n    }).catch(function (error) {\n      console.error(error.response ? error.response.data : error.message);\n    });\n  };\n  useEffect(function () {\n    if (input1) {\n      nameToID();\n    }\n  }, [input1]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"input1\",\n        value: input1,\n        onChange: function onChange(e) {\n          return setInput1(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"input2\",\n        value: input2,\n        onChange: function onChange(e) {\n          return setInput2(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: handleSignin,\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, _this), loginStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: loginStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, _this), getClientID() && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Client ID: \", getClientID()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, _this);\n};\n_s(SigninComponent, \"Of1GGxEgndxGmnWdhN0crdoBGTM=\", false, function () {\n  return [useHistory];\n});\n_c = SigninComponent;\nexport default SigninComponent;\nvar _c;\n$RefreshReg$(_c, \"SigninComponent\");","map":{"version":3,"names":["React","useState","useEffect","axios","useHistory","IdHandlerComponent","jsxDEV","_jsxDEV","SigninComponent","_ref","_s","onSignUpSuccess","_useState","_useState2","_slicedToArray","input1","setInput1","_useState3","_useState4","input2","setInput2","_IdHandlerComponent","setClientID","getClientID","_useState5","_useState6","retrieved_ID","setRetrievedID","_useState7","_useState8","loginStatus","setLoginStatus","history","nameToID","get","concat","then","response","_response$data","data","retrievedID","catch","error","console","message","handleSignin","post","username","password","status","userData","user","id","sessionStorage","setItem","JSON","stringify","push","children","fileName","_jsxFileName","lineNumber","columnNumber","_this","type","name","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["/Users/Ray/Desktop/Client-Server-Proj/CS35L/client-server-APP/fe/src/signin.jsx"],"sourcesContent":["// signin.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport IdHandlerComponent from \"./idHandler\";  // Update the import path accordingly\r\nimport \"./signup.css\";\r\n\r\nconst SigninComponent = ({ onSignUpSuccess }) => {\r\n  const [input1, setInput1] = useState(\"\");\r\n  const [input2, setInput2] = useState(\"\");\r\n  const { setClientID, getClientID } = IdHandlerComponent();\r\n\r\n  const [retrieved_ID, setRetrievedID] = useState(\"\");\r\n  const [loginStatus, setLoginStatus] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const nameToID = () => {\r\n    axios.get(`http://localhost:8081/user/nameToID/${input1}`)\r\n      .then(response => {\r\n        const [retrievedID] = response.data;\r\n        setRetrievedID(retrievedID);\r\n      })\r\n      .catch(error => {\r\n        console.error(error.response ? error.response.data : error.message);\r\n      });\r\n  };\r\n\r\n  const handleSignin = () => {\r\n    axios.post('http://localhost:8081/user/signin', {\r\n      username: input1,\r\n      password: input2\r\n    })\r\n      .then(response => {\r\n        if (!(response && response.data && response.data.status === \"success\")) {\r\n          setLoginStatus(\"Login failed\");\r\n          return;\r\n        }\r\n        const userData = response.data.user;\r\n        setClientID(userData.id);\r\n        // store user info in sessionStorage\r\n        sessionStorage.setItem(\"userInfo\", JSON.stringify(userData));\r\n\r\n        onSignUpSuccess(); \r\n        history.push(\"/\");\r\n\r\n      })\r\n      .catch(error => {\r\n        console.error(error.response ? error.response.data : error.message);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (input1) {\r\n      nameToID();\r\n    }\r\n  }, [input1]);\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <h3>Username</h3>\r\n        <input\r\n          type=\"text\"\r\n          name=\"input1\"\r\n          value={input1}\r\n          onChange={(e) => setInput1(e.target.value)}\r\n        />\r\n      </div>\r\n      <div>\r\n        <h3>Password</h3>\r\n        <input\r\n          type=\"password\"\r\n          name=\"input2\"\r\n          value={input2}\r\n          onChange={(e) => setInput2(e.target.value)}\r\n        />\r\n      </div>\r\n      <br />\r\n      <div>\r\n        <button type=\"submit\" onClick={handleSignin}>Sign In</button>\r\n      </div>\r\n      {loginStatus && (\r\n        <div>\r\n          <p>{loginStatus}</p>\r\n        </div>\r\n      )}\r\n      {getClientID() && (\r\n        <div>\r\n          <p>Client ID: {getClientID()}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SigninComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}